<!DOCTYPE html>
<html lang="en">
<!--json test-->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PubcaseFinder</title>
    <!--css-->
    <!-- start bits-->
    <link rel="stylesheet" href="https://unpkg.com/destyle.css@1.0.5/destyle.css">
    <link rel="stylesheet" href="/static/bootstrap-4.6.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="/static/record/css/phenotype/tippy.css">
    <link rel="stylesheet" href="/static/record/css/phenotype/search-box-form.css">
    <link rel="stylesheet" href="/static/record/css/phenotype/text-input.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/static/record/css/phenotype/magnific-popup.css">
    <link rel="stylesheet" href="/static/record/css/phenotype/token-input-facebook.css">
    <link rel="stylesheet" href="/static/record/css/phenotype/popup-hierarchy-hpo.css">
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale-extreme.css" />
    <link rel="stylesheet" href="/static/record/css/phenotype/modal_phenotype.css">
    <!-- end bits-->
    <link rel="stylesheet" href="https://unpkg.com/destyle.css@1.0.5/destyle.css">
    <link rel='stylesheet' href="/static/css/pcf/branc.css">
    <link rel='stylesheet' href="/static/css/pcf/branc-ie7.css">
    <link rel='stylesheet' href="/static/css/pcf/branc-ie7-codes.css">
    <link rel='stylesheet' href="/static/css/pcf/branc-embedded.css">
    <link rel='stylesheet' href="/static/record/css/branc.css">
    <link rel='stylesheet' href="/static/record/css/branc-ie7.css">
    <link rel='stylesheet' href="/static/record/css/branc-ie7-codes.css">
    <link rel='stylesheet' href="/static/record/css/branc-embedded.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="/static/css/pcf/remodal.css" rel="stylesheet">
    <link href="/static/css/pcf/remodal-default-theme.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
    <link rel="manifest" href="/static/images/site.webmanifest">
    <link rel="mask-icon" href="/static/images/safari-pinned-tab.svg" color="#2a3356">
    <script src="https://cdn.jsdelivr.net/npm/handsontable@12.3.1/dist/handsontable.full.min.js"></script>
    <link type="text/css" rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/handsontable@12.3.1/dist/handsontable.full.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/yamljs@0.3.0/dist/yaml.min.js"></script>
    <meta name="msapplication-TileColor" content="#2a3356">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/static/css/pcf/style-togo.css">
    <link rel="stylesheet" href="/static/record/css/record.css">
    <link rel="stylesheet" href="/static/record/css/record_re.css">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Noto+Sans+JP:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

</head>

<body onbeforeunload="return beforeLoad()">
    <!-- <body> -->
    <div class="sidebar">
        <div class="logo-details">
            <div class="logo_name">PubCaseFinder</div>
            <i class='bx bx-menu' id="btn"></i>
        </div>
        <ul class="nav-list">
            <li>
                <a class="sidebar-patients sidebar-selected" href="#" onclick="toggleTableChart('table')">
                    <div class="sidebar-icon sidebar-patient"></div>
                    <span class="links_name">Patients</span>
                </a>
                <!--<span class="tooltip">Patients</span>-->
            </li>
            <li>
                <a class="sidebar-analytics" href="#" onclick="toggleTableChart('chart')">
                    <div class="sidebar-icon sidebar-stats"></div>
                    <span class="links_name">Stats</span>
                </a>
                <!--<span class="tooltip">Analytics</span>-->
            </li>
            <li>
            <li class="">
                <a href="#" onclick="document.getElementById('import_btn').click()">
                    <div class="sidebar-icon sidebar-open"></div>
                    <span class="text nav-text links_name">File open</span>
                    <input type="file" id="import_btn" onchange="importFile(event)">
                </a>
                <!--<span class="tooltip">File open</span>-->
            </li>
            <li id="menu-save">
                <a href="#">
                    <div class="sidebar-icon sidebar-save"></div>
                    <span class="links_name">File save
                    </span>
                </a>
                <div class="save-panel">
                    <div class="save-format">
                        <p>Format :</p>
                        <select name="file" id="dl-select">
                            <option value="json">json</option>
                            <option value="tsv">tsv</option>
                        </select>
                    </div>
                    <button id="dl_table_button" onclick="getExportData(false)">Save</button>
                </div>
                <!--<div class="popup-bg-cover"></div>-->
                <!-- </div> -->
            </li>
            <li>
                <a class="sidebar-filebond" href="#" onclick="document.getElementById('merge_btn').click()">
                    <div class="sidebar-icon sidebar-bond"></div>
                    <span class="links_name">File bond</span>
                    <input type="file" id="merge_btn" onchange="importFile(event)">
                </a>
                <!--<span class="tooltip">Analytics</span>-->
            </li>
            <!--<li class="contact">
                <a href="#">
                    <i class="material-symbols-outlined">
                        mail
                    </i>
                    <span class="links_name">Contact</span>
                </a>
                <span class="tooltip">Contact</span>
            </li>-->
        </ul>
    </div>
    <section class="home-section">
        <div class="common-nav-container" id="nav-case">
            <a href="#" class="common-brand"><img src="/static/record/images/logo_CaseSharing.svg"></a>
            <ul class="nav-items">
                <!-- Dropdown menu -->
                <li class="nav-item nav-item-dropdown" id="nav-info">
                    <a class="dropdown-trigger" href="#">
                        <i class="material-symbols-outlined">
                            info
                        </i>
                    </a>
                </li>
                <li class="nav-item nav-item-dropdown" id="nav-menu">
                    <a class="dropdown-trigger" href="#"><i class="material-symbols-outlined">
                            apps
                        </i></a>
                    <ul class="dropdown-menu common-menu">
                        <ul class="common-menu-wrap">
                            <li class="dropdown-menu-item common-menu-item">
                                <a href="/guides">
                                    <i class="icon-question-circle-o"></i>
                                    <span>Guides</span></a>
                            </li>
                            <li class="dropdown-menu-item common-menu-item">
                                <a href="/api"><i class="icon-wrench"></i><span>API</span></a>
                            </li>
                            <li class="dropdown-menu-item common-menu-item">
                                <a href="/history"><i class="icon-history"></i><span>History</span></a>
                            </li>
                            <li class="dropdown-menu-item common-menu-item">
                                <a href="/termsofservice"><i class="icon-doc-text-inv"></i><span>Terms</span></a>
                            </li>
                            <li class="dropdown-menu-item common-menu-item">
                                <a href="/sources"><i class="icon-database"></i><span>Sources</span></a>
                            </li>
                            <!--<li class="dropdown-menu-item common-menu-item">
                            <a target="_blank" href="https://integbio.jp/rdf/dataset/pubcasefinder"><i
                                    class="icon-share"></i><span>RDF</span></a>
                        </li>-->
                            <li class="dropdown-menu-item common-menu-item">
                                <a title="Comments &amp; suggestions are welcome!"
                                    href="mailto:support@dbcls.rois.ac.jp,pubcasefinder@dbcls.rois.ac.jp"><i
                                        class="icon-mail-alt"></i><span>Contact</span></a>
                            </li>
                            <ul class="dropdown-service">
                                <li class="dropdown-menu-item">
                                    <i>
                                        <img src="/static/record/images/commonmenu-icon1.svg">
                                    </i>
                                    <span>
                                        <h4>Disease Search</h4>
                                    </span>
                                </li>
                                <li class="dropdown-menu-item">
                                    <i>
                                        <img src="/static/record/images/commonmenu-icon2.svg">
                                    </i>
                                    <span>
                                        <h4>Case Sharing</h4>
                                    </span>
                                </li>
                                <li class="dropdown-menu-item">
                                    <i>
                                        <img src="/static/record/images/commonmenu-icon3.svg">
                                    </i>
                                    <span>
                                        <h4>Panel Search</h4>
                                    </span>
                                </li>
                            </ul>
                        </ul>
                        <li class="popup-bg-cover"></li>
                    </ul>
                </li>
                <li class="nav-item nav-item-dropdown" id="nav-language">
                    <a class="dropdown-trigger" href="#">
                        <i class="material-symbols-outlined">
                            public
                        </i>
                        <span id="selected-language-display"></span></a>
                    <ul class="dropdown-menu" id="dropdown-language">
                        <ul class="dropdown-languag-wrap">
                            <li class="dropdown-menu-item" data-lang="ja">日本語</li>
                            <li class="dropdown-menu-item" data-lang="en">English</li>
                            <li class="dropdown-menu-item" data-lang="ko">한국어</li>
                            <li class="dropdown-menu-item" data-lang="zh">中文(简体)</li>
                            <li class="dropdown-menu-item" data-lang="zhcht">中文(繁体)</li>
                        </ul>
                        <li class="popup-bg-cover"></li>
                    </ul>
                </li>
            </ul>
        </div>
        <main id="content-patients">
            <div id="home-menu">
                <div class="title">
                    <i class="bxt icon material-icons-outlined person_icon">
                        recent_actors
                    </i>
                    <span class="text nav-text link_name">MY PATIENTS :</span>
                    <h1 id="row_count">0</h1>
                </div>
                <div class="right-menu">
                    <span class="material-symbols-outlined" id="hot-undo">
                        undo
                    </span>
                    <span class="material-symbols-outlined" id="hot-redo">
                        redo
                    </span>
                    <span id="reset" onclick="pageReload()"><i class="material-symbols-outlined">
                            restart_alt
                        </i>
                    </span>
                    <div class="search_wrap">
                        <span class="material-symbols-outlined">
                            manage_search
                        </span>
                        <span id="search-result-count"></span>
                        <input type="search" placeholder="一覧表を検索" id="search_input" autocomplete="off">
                    </div>
                    <div id="table_menu">
                        <span onclick="addColumn()" id="add-column">
                            <!-- <i class="material-symbols-outlined">
                                view_week</i> -->
                            <div class="list-icon list-column"></div>
                            <span>列追加</span>
                        </span>
                        <span onclick="addRow()" id="add-row">
                            <!-- <i class="material-symbols-outlined">
                                table_rows</i> -->
                            <div class="list-icon list-row"></div>
                            <span>行追加</span>
                        </span>
                        <li class="modal_open karte-btn karte-add" data-target="modal-karte" rel="noopener noreferrer">
                            <!-- <i class="material-symbols-outlined">
                                edit_square</i> -->
                            <div class="list-icon list-edit-white"></div>
                            <span>New</span>
                        </li>
                    </div>
                </div>
            </div>
            <div id="fixed-menu">
                <div class="modal">
                    <div class="modal_content">
                        <div class="button_wrap">
                            <input id="add_column_input" type="text" placeholder="新規項目">
                            <div class="add"><i class="material-symbols-outlined">
                                    playlist_add
                                </i>作成</div>
                        </div>
                        <div class="modal_container" id="modal_container">
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <div id="myGrid" ondragover="onDragOver(event)" ondrop="onDrop(event)"></div>
        </main>

        <main id="charts-patients">
            <div id="home-menu">
                <div class="title">
                    <i class="bxt icon material-icons-outlined person_icon">
                        pie_chart
                    </i>
                    <span class="text nav-text link_name">MY CHART </span>
                </div>
            </div>
            <!-- <div class="chart-container">
                <canvas class="chart bar-chart" id="bar-chart-family"></canvas>
            </div> -->
            <div class="chart-container">
                <canvas class="chart pie-chart" id="pie-chart-sex-age"></canvas>
            </div>
            <div class="chart-container">
                <canvas class="chart pie-chart" id="pie-chart-sex"></canvas>
            </div>
            <!-- <div class="chart-container">
                <canvas class="chart pie-chart" id="pie-chart-age"></canvas>
            </div> -->
            <div class="chart-container">
                <canvas class="chart bar-chart" id="bar-chart-group"></canvas>
            </div>
        </main>
    </section>
    <div id="modal-karte" class="modal_box modal-karte">
        <!--left-->
        <div class="resize-handle"></div>
        <!--<div id="modal-karte-button-sub">
            <button class="modal-phenopackets"><img src="/static/images/PhenoPackets_Logo.png">
                <p>Phenopackets
                    download</p>
                <i class="material-symbols-outlined">
                    downloading
                </i>
            </button>
            <button class="modal-copy"><i class="material-symbols-outlined">
                    file_copy
                </i>
                <p>Data copy</p>
            </button>
        </div>-->
        <div class="tab-wrap" id="tab-wrap">
        </div>
        <button class="modal-close"><span class="material-symbols-outlined">
                close
            </span>
        </button>
        <div id="modal-karte-button">
            <button class="modal-copy"><i class="material-symbols-outlined">
                    file_copy
                </i>
                <p>Copy</p>
            </button>
            <button class="modal-phenopackets"><img src="/static/images/PhenoPackets_Logo.png">
                <p>Phenopackets</p>
                <i class="material-symbols-outlined">
                    downloading
                </i>
            </button>
        </div>
    </div>

    <div id="modal-info" class="modal_box modal-karte">
        <div class="modal-karte-button-sub" id="modal-info-content">
            <ul>
                <li>
                    <i class="material-symbols-outlined">
                        receipt_long
                    </i>
                    <span>
                        <h4>How to use</h4>
                        <p>Here is a brief description of how to use the service. This is a dummy text.This is a dummy
                            text.
                        </p>
                    </span>
                </li>
                <li>
                    <i class="material-symbols-outlined">
                        subscriptions
                    </i>
                    <span>
                        <h4>How to use</h4>
                        <p>Here is a brief description of how to use the service. This is a dummy text.This is a dummy
                            text.
                        </p>
                    </span>
                </li>
                <li>
                    <i class="material-symbols-outlined">
                        format_list_numbered
                    </i>
                    <span>
                        <h4>How to use</h4>
                        <p>Here is a brief description of how to use the service. This is a dummy text.This is a dummy
                            text.
                        </p>
                    </span>
                </li>
                <li>
                    <i class="material-symbols-outlined">
                        sign_language
                    </i>
                    <span>
                        <h4>How to use</h4>
                        <p>Here is a brief description of how to use the service. This is a dummy text.This is a dummy
                            text.
                        </p>
                    </span>
                </li>
            </ul>
        </div>
        <div id="modal-info-button">
            <button class="info-modal-close"><span>Let's start!</span></button>
        </div>
    </div>

    <script>
        let sidebar = document.querySelector(".sidebar");
        let closeBtn = document.querySelector("#btn");

        closeBtn.addEventListener("click", () => {
            sidebar.classList.toggle("open");
            menuBtnChange();
        });

        // following are the code to change sidebar button(optional)
        function menuBtnChange() {
            if (sidebar.classList.contains("open")) {
                closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
            } else {
                closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");//replacing the iocns class
            }
        }

        //resize handle
        const modal = document.querySelector('#modal-karte');
        const resizeHandle = modal.querySelector('.resize-handle');

        let isResizing = false;
        let lastX = 0;

        resizeHandle.addEventListener('mousedown', (event) => {
            isResizing = true;
            lastX = event.clientX;
        });

        document.addEventListener('mousemove', (event) => {
            if (!isResizing) return;

            const delta = event.clientX - lastX;
            lastX = event.clientX;
            const modalWidth = parseInt(getComputedStyle(modal).getPropertyValue('width'));
            const newWidth = modalWidth - delta;
            if (newWidth < 400) newWidth = 400;

            modal.style.width = newWidth + 'px';
        });

        document.addEventListener('mouseup', () => {
            isResizing = false;
        });

    </script>
</body>

<!-- start bits-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="/static/bootstrap-4.6.2-dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script type="text/javascript" src="/static/record/js/phenotype/tippyjs/tippy-bundle.umd.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jquery.magnific_popup.min.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/magnific-popup-options.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jquery.stellar.min.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/rater.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jquery.tokeninput.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/popup-hierarchy-hpo.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/button-ripple-effect.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jaconv/jaconv.min.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jquery.multitextinput_hpo.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/jquery.search-box_form.js"></script>
<script type="text/javascript" src="/static/record/js/phenotype/modal_phenotype.js"></script>
<!-- end bits-->
<script type="text/javascript"
    src="https://dbcls.rois.ac.jp/DBCLS-common-header-footer/v2/script/common-header-and-footer.js"
    style="display: block" id="common-header-and-footer__script" data-width="976" data-color="mono"></script>
<script src="/static/record/js/renderer.js"></script>
<script src="/static/record/variables/columns.js"></script>
<script src="/static/record/variables/emptyData.js"></script>
<script src="/static/record/variables/translation.js"></script>
<script src="/static/record/js/modal.js" async defer></script>
<script src="/static/record/js/modal_table.js" async defer></script>
<script src="/static/record/js/chart.js" async defer></script>
<script src="/static/record/js/record.js" async defer></script>

<!--追加-->
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">

</html>